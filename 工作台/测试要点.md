### 退回功能测试要点

#### 正常流程测试
1.  **成功退回**:
    *   **场景**: 用户点击退回按钮，系统成功将任务退回到上一节点。
    *   **验证**:
        *   当前节点状态变为“已退回”。
        *   上一节点处理人收到新的待办任务。
        *   退回备注信息被正确记录。
        *   当前处理人的任务状态更新为“已退回”。
        *   同一审批环节的其他处理人任务状态更新为“已废弃”。
        *   操作时间戳被正确更新。

#### 幂等性检查测试
2.  **数据已被修改**:
    *   **场景**: 用户A打开任务页面，用户B在此期间处理了该任务。用户A再点击退回。
    *   **验证**:
        *   系统提示“数据已被修改，请刷新后重试”。
        *   节点状态未发生任何变化。

#### 合法性校验测试
3.  **无法退回（无维护节点）**:
    *   **场景**: 任务流转路径上没有可以退回的“维护节点”（例如，流程的第一个节点）。
    *   **验证**:
        *   系统提示“当前任务无法退回”。
        *   节点状态未发生任何变化。

#### 并发与异常测试
4.  **重复操作**:
    *   **场景**: 用户快速连续点击两次退回按钮。
    *   **验证**:
        *   第一次操作成功，第二次操作失败。
        *   系统提示“节点状态已变更，无法重复操作”或类似信息。
        *   最终只有一个退回操作生效，不会创建重复的节点。

5.  **退回目标处理人不存在**:
    *   **场景**: 上一维护节点的处理人账号被禁用或删除。
    *   **验证**:
        *   系统应有合理的处理机制，例如：
            *   退回失败，并提示“无法找到上一节点处理人，请联系管理员”。
            *   将任务退回到指定的备用处理人或角色。
        *   节点状态不会被错误地更新。

#### 数据一致性测试
6.  **数据库状态验证**:
    *   **场景**: 完成一次成功的退回操作后。
    *   **验证**:
        *   检查数据库中相关表（节点表、处理人信息表等）的字段值是否与预期一致。
        *   `节点状态`、`处理人状态`、`备注`、`时间戳`等字段都应正确更新。
        *   验证新创建的维护节点信息是否完整、正确。
